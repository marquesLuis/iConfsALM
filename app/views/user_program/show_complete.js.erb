
var theOtherScript1 = '/assets/fullcalendar';
var theOtherScript2 = '/assets/gcal';
var theOtherScript3 = '/assets/fullcalendar.min';
var theOtherScript4 = '/assets/jquery-ui-1.10.2.custom.min.js';

var el1 = document.createElement('script');
var el2 = document.createElement('script');
var el3 = document.createElement('script');
var el4 = document.createElement('script');
el1.async = false;
el2.async = false;
el3.async = false;
el4.async = false;
el1.src = theOtherScript1;
el2.src = theOtherScript2;
el3.src = theOtherScript3;
el4.src = theOtherScript4;
el1.type = 'text/javascript';
el2.type = 'text/javascript';
el3.type = 'text/javascript';
el4.type = 'text/javascript';

(document.getElementsByTagName('HEAD')[0]||document.body).appendChild(el4);
(document.getElementsByTagName('HEAD')[0]||document.body).appendChild(el1);
(document.getElementsByTagName('HEAD')[0]||document.body).appendChild(el2);
(document.getElementsByTagName('HEAD')[0]||document.body).appendChild(el3);

var date = new Date();
var d = date.getDate();
var m = date.getMonth();
var y = date.getFullYear();
$('#calendar').fullCalendar({

    defaultView: 'agendaWeek',
    editable: false,
    minTime: <%= @min_hour %>,
    maxTime: <%= @max_hour %>,
    year: <%= @begin_year %>,
    month: <%= @begin_month %>,
    date: <%= @begin_day %>,
    firstDay: <%= @begin_weekday %>,

        header: {
        left: 'prev,next today',
        center: 'title',
        right: 'agendaWeek,agendaDay'
    },
    events: [
        <% @events.each do |event| %>
            <% group = event.event_group %>
            {
                title: '<%= event.title %>',
                start: new Date(<%= group.date.year %>,<%= ((group.date.month) -1) %>,<%= group.date.day %>, <%= event.begin.hour %>, <%= event.begin.min %>),
                end: new Date(<%= group.date.year %>,<%= ((group.date.month) -1) %>,<%= group.date.day %>, <%= event.end.hour %> , <%= event.end.min %>),
                allDay: false,
                url: '/user_program/show_event/?id=<%= event.id %>'
            },
        <% end %>
    ]
});
