$('#calendar').empty().fullCalendar({

    defaultView: 'agendaWeek',
    editable: false,
    allDaySlot: false,
    minTime: <%= @min_hour %>,
    maxTime: <%= @max_hour %>,
    year: <%= @begin_year %>,
    month: <%= @begin_month %>,
    date: <%= @begin_day %>,
    firstDay: <%= @begin_weekday %>,

    header: {
        left: 'prev,next today',
        center: 'title',
        right: 'agendaWeek,agendaDay'
    },
    events: [
        <% @events.each do |event| %>
        <% group = event.event_group %>
        {
            title: '<%= event.title %>',
            <% if event.speaker %>
            <% if event.speaker.keynote %>
            borderColor: 'blue',
            <% end %>
            <% end %>
            start: new Date(<%= group.date.year %>, <%= ((group.date.month) -1) %>, <%= group.date.day %>, <%= event.begin.hour %>, <%= event.begin.min %>),
            end: new Date(<%= group.date.year %>, <%= ((group.date.month) -1) %>, <%= group.date.day %>, <%= event.end.hour %>, <%= event.end.min %>),
            allDay: false,
            url: '/user_program/show_event/?id=<%= event.id %>'
        },
        <% end %>
    ]
});
